План Реализации "ТП-Фармера"
Цель: Создать Дерево Поведения, которое будет телепортироваться по точкам из твоего .json файла, искать руду и собирать ее.
Шаг 1: Обновляем "Чертеж" Профиля
Что делаем: Немного доработаем наш GatheringProfile.h. Мы будем использовать простой формат, как ты и хотел, но добавим в структуру поля для будущих настроек, чтобы не переделывать потом.
Файл: src/core/Bot/Profiles/GatheringProfile.h
Результат: У нас будет C++ структура, которая точно соответствует нашему (пока простому) JSON-файлу.
Шаг 2: Учим ProfileManager читать твой JSON
Что делаем: Обновляем ProfileManager.cpp. Мы напишем код, который будет открывать твой JSON, читать массив "path" и заполнять им std::vector<Vector3> в объекте GatheringProfile.
Файлы: src/core/ProfileManager/ProfileManager.h и .cpp.
Результат: ProfileManager сможет превращать твой JSON-файл в удобный C++ объект.
Шаг 3: Создаем "Навык" Следования по Маршруту
Что делаем: Создадим новый, ключевой узел Дерева Поведения — FollowPathAction.
Файлы: src/core/Bot/Behaviors/Movement/FollowPathAction.h и .cpp.
Задача этого "навыка":
При первом запуске он посмотрит в настройки и решит, с какой точки начать (пока что просто с первой).
На каждом tick() он будет брать следующую точку из маршрута, который хранится в BTContext.
Он не будет сам двигаться. Его задача — просто положить координаты следующей точки в context.currentTargetPosition. Он как штурман, который говорит: "Пилот, наша следующая цель — вот эти координаты".
После этого он вернет Success.
Шаг 4: Создаем "Навык" Сбора Ресурса
Что делаем: Создадим еще один простой узел — GatherAction.
Файлы: src/core/Bot/Behaviors/Interaction/GatherAction.h и .cpp.
Задача этого "навыка":
Он берет GUID цели из context.currentTargetGuid.
Отправляет команду "взаимодействовать с объектом" в DLL (нам нужно будет добавить такую команду).
Ждет, пока персонаж закончит сбор (проверяя состояние персонажа).
Возвращает Success после успешного сбора.
Шаг 5: Пересобираем OreGrindModule — "Мозг" Фармера