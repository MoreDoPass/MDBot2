# План рефакторинга WMO-парсера

- [ ] **(Критично)** Изменить API:
  - [ ] Основной метод `parse` должен принимать `const std::vector<unsigned char>& rootWmoBuffer`.
  - [ ] Он также должен принимать `std::function<std::optional<std::vector<unsigned char>>(const std::string&)> fileProvider` — функцию-замыкание, которую он будет вызывать для получения буферов групповых `.wmo` файлов и M2 моделей по их именам. Это полностью отвяжет парсер от `MpqManager` и дисковых операций.
- [ ] **(Критично)** Убрать все операции чтения с диска (`std::ifstream`) из парсера. Вся работа должна вестись только с буферами.
- [ ] Изменить внутренние методы `parseRootFile` и `parseGroupFile`, чтобы они также работали с буферами, а не путями.
- [ ] Объединить `WmoRootData` и `WmoGeometry` в единую возвращаемую структуру `WmoData`. Метод `parse` должен возвращать `std::optional<WmoData>`.
- [ ] Адаптировать `TestWMOParser` для работы с новым API: тесты должны будут читать файлы в буфер и предоставлять `fileProvider`.
