Тема: Интеграция NavMeshTool с MDBot2 (Детализированный план)

**Цель:** Модифицировать NavMeshTool для генерации NavMesh'ей в формате, совместимом с тайловой системой MDBot2.

---
**Этап 1: Получение Map ID и рефакторинг путей (Задача №1 из старого TODO)**
*   **Подзадача 1.1: Создать парсер для `Map.dbc`**
    *   [x] Создать новый класс `DBCParser` в `src/core/WoWFiles/Parsers/DBC/`.
    *   [x] В `DBCParser.h` описать интерфейс с методом `parse(buffer)`, который возвращает `std::vector<MapRecord>`.
    *   [x] В `DBCParser.cpp` реализовать логику парсинга: чтение заголовка, определение кол-ва и размера записей, проход по строкам и извлечение нужных полей.

*   **Подзадача 1.2: Интегрировать `DBCParser` в `main.cpp` для отладки**
    *   [x] В `main.cpp` добавить чтение файла `DBFilesClient/Map.dbc`.
    *   [x] Вызвать `DBCParser` для разбора буфера `Map.dbc` и получения списка всех карт.
    *   [x] Реализовать поиск нужной карты по ее отображаемому имени (`displayName`).
    *   [x] Использовать внутреннее имя (`internalName`) найденной карты для вызова `NavMeshGenerator::loadMapData`.

*   **Подзадача 1.3: Изменить логику сохранения файлов**
    *   [x] Передать найденный `mapID` в `NavMeshGenerator::loadMapData` и сохранить его в члене класса.
    *   [x] В `processAdtChunk` использовать `mapID`, `row` и `col` для формирования нового пути.
        *   [x] Создать строку с путем к директории: `output/{mapID}`.
        *   [x] Использовать `QDir.mkpath()` для создания этой директории.
        *   [x] Сформировать имя файла: `{col}_{row}.navmesh`.
        *   [x] Объединить путь и имя и использовать его для сохранения.

---
**Этап 2: Конфигурация и метаданные (Задача №3 из старого TODO)**
*   **Подзадача 2.1: Вынести `rcConfig` во внешний файл**
    *   [ ] Создать `config.json` в корневой папке проекта.
    *   [ ] В `main.cpp` с помощью `QFile` и `QJsonDocument` прочитать `config.json`.
    *   [ ] Заполнить структуру `rcConfig` значениями из JSON'а.
    *   [ ] Удалить жестко заданные значения `rcConfig` из `NavMeshGenerator.cpp`.
*   **Подзадача 2.2: Создание файла метаданных**
    *   [ ] В `NavMeshGenerator` накапливать общий `bmin` и `bmax` для всей карты.
    *   [ ] После обработки всех ADT, в `loadMapData`, создать файл `output/{mapID}/metadata.json`.
    *   [ ] Записать в него `origin` (общий `bmin`), `tileWidth`, `tileHeight` и, возможно, использованные параметры `rcConfig`.

---
**Этап 3: Визуализация для отладки (сохранение NavMesh в .obj)**
*   **Подзадача 3.1: Получить финальные данные полигонального меша**
    *   [x] В `RecastBuilder::build` после успешного создания `dtNavMesh` (финального NavMesh'а), нам нужно получить доступ к его полигонам и вершинам. Эти данные уже есть в `m_pmesh` (полигональный меш) и/или `m_dmesh` (детализированный меш), которые использовались для создания `dtNavMesh`.
    *   [x] Изменить `RecastBuilder::build`, чтобы он возвращал не просто бинарный `vector<byte>`, а структуру, содержащую и этот вектор, и данные для `.obj` (например, `struct NavMeshBuildResult { std::vector<byte> navmeshData; rcPolyMesh* polyMesh; };`).

*   **Подзадача 3.2: Реализовать сохранение в .obj**
    *   [x] Создать новый приватный метод в `NavMeshGenerator`, например, `saveNavMeshToObj(const std::string& filename, const rcPolyMesh* polyMesh)`.
    *   [x] Внутри этого метода:
        *   [x] Открыть файл для записи.
        *   [x] Пройтись циклом по `polyMesh->verts`. Каждую вершину записать в файл в формате `v x y z\n`. Обратите внимание, что Recast использует другую систему координат, возможно, потребуется поменять местами Y и Z (`v x z -y\n`). Это нужно будет проверить экспериментально.
        *   [x] Пройтись циклом по `polyMesh->polys`. Каждый полигон — это набор индексов вершин. Записать их в формате `f i1 i2 i3 ...\n`. Индексы в .obj начинаются с 1, а не с 0, поэтому к каждому индексу из `polyMesh` нужно будет прибавить 1.
    *   [x] В `NavMeshGenerator::processAdtChunk`, после вызова `buildAndSaveNavMesh`, вызвать новый метод `saveNavMeshToObj`, чтобы сохранить отладочный `.obj` файл рядом с `.navmesh`. Имя файла должно быть, например, `{col}_{row}_navmesh.obj`.

---
**Следующие шаги**
*   Вернуться к **Этапу 2** (Конфигурация и метаданные).
