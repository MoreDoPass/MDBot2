#pragma once

#include "Voxelizer.h" // Нам нужна структура VoxelGrid
#include <cstdint>     // Для uint8_t
#include <vector>

/**
 * @class VoxelCoster
 * @brief Утилитарный класс для назначения стоимостей проходимым вокселям.
 * @details Его основная задача - взять бинарную карту проходимости (да/нет)
 *          и превратить ее в карту стоимостей, которая учитывает такие факторы,
 *          как близость к обрывам. Это позволяет A* строить более безопасные
 *          пути.
 */
class VoxelCoster {
public:
  /**
   * @brief Анализирует готовую воксельную сетку и вычисляет стоимость
   *        прохода для каждого вокселя.
   * @details Проходит по каждому проходимому вокселю и проверяет его соседей.
   *          Если соседний воксель является обрывом (т.е. под ним нет "твердой"
   *          опоры), стоимость текущего вокселя увеличивается.
   * @param walkableGrid Финальная сетка проходимых вокселей из Voxelizer'а.
   * @param solidGrid "Твердая" геометрия (нужна для точной проверки обрывов).
   * @return Вектор `uint8_t` того же размера, что и исходные сетки.
   *         - Значение `0` означает, что воксель непроходим.
   *         - Значение `> 0` означает, что воксель проходим, и это значение
   *           является его "стоимостью" для поиска пути.
   */
  static std::vector<uint8_t> calculateCosts(const VoxelGrid &walkableGrid,
                                             const VoxelGrid &solidGrid);
};